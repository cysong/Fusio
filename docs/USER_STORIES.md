# Fusio 用户故事 (User Stories)

> 多交易所聚合交易平台 - 用户场景文档
>
> 版本: V1.0 | 更新时间: 2025-01-13

---

## 用户角色定义

### 主要角色: 个人交易者 (Trader)

**角色描述**:
- 拥有多个交易所账户的加密货币交易者
- 需要频繁比较不同交易所的价格
- 希望以最优价格执行交易
- 关注交易成本和执行效率

**痛点**:
- 需要在多个交易所网站/APP之间切换
- 手动比较价格耗时且容易出错
- 无法快速找到最优价格
- 缺少统一的订单管理界面

**目标**:
- 在一个界面查看所有交易所价格
- 自动找到最优交易价格
- 快速执行交易订单
- 追踪所有交易历史

---

## 核心用户故事

### Story 1: 用户注册与登录

**作为** 一个新用户
**我想要** 注册并登录系统
**以便** 开始使用交易功能

#### 验收标准

**场景 1.1: 新用户注册**
```
Given 我是一个新用户
When 我访问注册页面
  And 我输入邮箱 "trader@example.com"
  And 我输入密码 "SecurePass123"
  And 我点击"注册"按钮
Then 系统创建我的账户
  And 自动为我分配初始余额 10000 USDT
  And 跳转到登录页面
  And 显示成功提示 "注册成功，请登录"
```

**场景 1.2: 已有用户登录**
```
Given 我已经注册过账户
When 我访问登录页面
  And 我输入正确的邮箱和密码
  And 我点击"登录"按钮
Then 系统验证我的身份
  And 签发 JWT Token
  And 跳转到主看板页面
  And 显示欢迎信息 "欢迎回来, trader@example.com"
```

**场景 1.3: 登录失败处理**
```
Given 我在登录页面
When 我输入错误的密码
  And 我点击"登录"按钮
Then 系统显示错误提示 "邮箱或密码错误"
  And 保持在登录页面
  And 不清空邮箱输入框
```

---

### Story 2: 查看实时价格看板

**作为** 一个已登录的交易者
**我想要** 查看多个交易所的实时价格
**以便** 快速了解市场行情并找到最优价格

#### 验收标准

**场景 2.1: 查看实时价格卡片**
```
Given 我已登录系统
When 我进入主看板页面
Then 我能看到价格看板
  And 显示 BTC/USDT 在三个交易所的价格卡片
    | 交易所  | 价格      | 涨跌幅  | 24h成交量    |
    | Binance | 67,234.50 | +0.5%  | 15,234.5 BTC |
    | Bybit   | 67,235.20 | +0.6%  | 12,456.3 BTC |
    | OKX     | 67,233.80 | -0.1%  | 10,789.2 BTC |
  And 显示 ETH/USDT 在三个交易所的价格卡片
  And 价格每秒自动更新
  And 价格上涨显示绿色，下跌显示红色
  And 每个价格卡片右上角有"查看图表"按钮
```

**场景 2.1.1: 切换到 K 线图视图**
```
Given 我在价格看板页面
When 我点击 BTC/USDT 价格卡片的"查看图表"按钮
Then 页面切换到 K 线图对比视图
  And 显示三个交易所的 K 线图并排展示
  And 图表时间范围默认为"最近 1 小时"
  And 每个图表显示对应交易所的 Logo 和名称
  And K 线颜色统一：上涨绿色，下跌红色
```

**场景 2.1.2: K 线图交互功能**
```
Given 我在 K 线图对比视图
When 我使用鼠标悬停在某个 K 线上
Then 显示该时间点的详细信息
    """
    时间: 2025-01-13 10:30
    开盘: 67,230.00
    最高: 67,250.00
    最低: 67,220.00
    收盘: 67,234.50
    成交量: 125.3 BTC
    """
  And 三个图表的十字线同步移动
  And 便于对比同一时刻的不同交易所价格
```

**场景 2.1.3: 切换时间范围**
```
Given 我在 K 线图对比视图
When 我点击时间范围选择器
  And 选择 "最近 24 小时"
Then 三个图表同步切换到 24 小时视图
  And K 线间隔自动调整为 5 分钟
  And 图表重新加载历史数据
  And 显示加载动画
When 数据加载完成
Then 显示完整的 24 小时 K 线图
  And 可以通过滚轮缩放查看更多细节
```

**场景 2.1.4: 价差可视化**
```
Given 我在 K 线图对比视图
When 我启用"价差分析"模式
Then 在三个图表下方显示价差曲线图
  And 显示 Binance vs Bybit 的价差曲线（黄色）
  And 显示 Binance vs OKX 的价差曲线（蓝色）
  And 显示 Bybit vs OKX 的价差曲线（紫色）
  And 当价差超过 0.1% 时高亮显示（套利机会）
  And 鼠标悬停显示具体价差数值和百分比
```

**场景 2.1.5: 切换回卡片视图**
```
Given 我在 K 线图对比视图
When 我点击"返回卡片视图"按钮
Then 页面切换回价格看板
  And 保留我之前选择的时间范围设置
  And 价格卡片继续实时更新
```

**场景 2.2: 最优价格提示**
```
Given 我在查看价格看板
When 系统接收到最新价格数据
Then 系统自动计算最优价格
  And 显示 "最优买入: OKX (67,233.80)"
  And 显示 "最优卖出: Bybit (67,235.20)"
  And 显示 "价差套利空间: 1.40 (0.002%)"
```

**场景 2.3: WebSocket 断线重连**
```
Given 我在查看价格看板
When WebSocket 连接意外断开
Then 系统显示 "连接断开，正在重连..."
  And 系统自动尝试重连
  And 最多重试 5 次
When 重连成功
Then 系统显示 "连接已恢复"
  And 价格继续实时更新
```

#### 技术实现

**价格卡片视图**:
- 后端: Market Service + WebSocket 客户端 + Socket.io Gateway
- 前端: Socket.io-client + React useState + useEffect + Ant Design Card
- 缓存: Redis 存储最新价格（实时数据）
- 数据源: Binance/Bybit/OKX WebSocket API

**K 线图对比视图**:
- 后端:
  - Market Service 聚合历史 K 线数据
  - REST API: GET /api/market/klines?symbol=BTCUSDT&interval=1m&limit=60
  - 数据库: PostgreSQL market_snapshots 表存储历史数据
  - 定时任务: 每分钟聚合一次 K 线数据
- 前端:
  - Lightweight Charts (TradingView 开源库)
  - React 组件: MultiExchangeChart.tsx
  - 图表同步: 共享 crosshair 状态
  - 响应式布局: 使用 CSS Grid 三列布局
- 数据流:
  - 初始加载: 从 REST API 获取历史数据
  - 实时更新: WebSocket 推送新 K 线数据
  - 本地缓存: TanStack Query 缓存图表数据

**价差分析功能**:
- 前端:
  - Recharts 绘制价差曲线
  - 实时计算价差: (priceA - priceB) / priceB * 100
  - 套利机会检测: 价差 > 0.1% 时高亮
- 算法:
  - 滑动窗口计算平均价差
  - 异常检测: 标准差分析

---

### Story 3: 提交交易订单

**作为** 一个已登录的交易者
**我想要** 提交买入或卖出订单
**以便** 以最优价格执行交易

#### 验收标准

**场景 3.1: 成功提交买入订单**
```
Given 我在交易页面
  And 我的账户余额为 10,000 USDT
  And 当前 BTC/USDT 最优买入价格为 67,233.80 (OKX)
When 我选择交易对 "BTC/USDT"
  And 我选择方向 "买入"
  And 我输入数量 "0.01"
  And 我点击"提交订单"按钮
Then 系统显示智能路由推荐
    """
    最优买入价格
    交易所: OKX
    价格: 67,233.80
    总成本: 672.34 USDT
    预计手续费: 0.67 USDT (0.1%)
    比 Binance 便宜: 0.70 USDT
    """
  And 系统创建订单记录
  And 订单状态为 "PENDING"
  And 显示提示 "订单已提交 #order-abc-123"
  And 订单进入异步处理队列
```

**场景 3.2: 订单异步执行**
```
Given 我的订单 #order-abc-123 已提交
When 后台 Worker 处理我的订单
  And 模拟调用 OKX 交易所 API
  And 执行成功
Then 系统更新订单状态为 "FILLED"
  And 记录成交价格 67,233.80
  And 记录成交数量 0.01
  And 记录成交时间
  And 扣除我的账户余额 672.34 USDT
  And 通过 WebSocket 推送订单更新
  And 前端显示通知 "订单已成交"
```

**场景 3.3: 订单被风控拦截 - 余额不足**
```
Given 我的账户余额为 100 USDT
When 我尝试买入 0.01 BTC (需要 672.34 USDT)
  And 我点击"提交订单"按钮
Then 系统进行风控检查
  And 检测到余额不足
  And 拒绝订单
  And 显示错误提示 "余额不足，当前余额: 100 USDT"
  And 不创建订单记录
```

**场景 3.4: 订单被风控拦截 - 超过每日限额**
```
Given 我今天已经提交了 100 笔订单
When 我尝试提交第 101 笔订单
  And 我点击"提交订单"按钮
Then 系统检查每日交易次数
  And 检测到超过限制
  And 拒绝订单
  And 显示错误提示 "超过每日交易次数限制 (100/100)"
```

#### 技术实现
- 后端: Trading Service + Risk Service + Bull Queue + Order Processor
- 前端: Ant Design Form + TanStack Query useMutation
- 数据库: PostgreSQL orders 表 + users 表
- 消息队列: Bull Queue (基于 Redis)

---

### Story 4: 查看订单历史

**作为** 一个已登录的交易者
**我想要** 查看我的历史订单
**以便** 追踪我的交易记录和分析交易情况

#### 验收标准

**场景 4.1: 查看订单列表**
```
Given 我已登录系统
  And 我有 3 笔历史订单
When 我点击"订单历史"菜单
Then 系统显示我的订单列表
    | 订单ID        | 交易对   | 方向 | 数量 | 交易所  | 状态   | 成交价   | 创建时间        |
    | order-abc-123 | BTC/USDT | 买入 | 0.01 | OKX     | 已成交 | 67,233.80| 2025-01-13 10:30|
    | order-def-456 | ETH/USDT | 卖出 | 0.5  | Binance | 已成交 | 3,456.20 | 2025-01-13 09:15|
    | order-ghi-789 | BTC/USDT | 买入 | 0.02 | Bybit   | 失败   | -        | 2025-01-12 16:45|
  And 订单按创建时间倒序排列
  And 每页显示 50 条记录
```

**场景 4.2: 查看订单详情**
```
Given 我在订单历史页面
When 我点击订单 #order-abc-123 的"详情"按钮
Then 系统显示订单详细信息
    """
    订单ID: order-abc-123
    交易对: BTC/USDT
    方向: 买入
    订单类型: 市价单
    数量: 0.01 BTC
    交易所: OKX
    状态: 已成交
    成交价格: 67,233.80 USDT
    成交金额: 672.34 USDT
    手续费: 0.67 USDT
    创建时间: 2025-01-13 10:30:25
    成交时间: 2025-01-13 10:30:28
    """
```

**场景 4.3: 实时订单更新**
```
Given 我在订单历史页面
  And 我有一个状态为 "PENDING" 的订单
When 后台 Worker 完成订单执行
  And 通过 WebSocket 推送订单更新
Then 前端自动刷新订单列表
  And 订单状态更新为 "FILLED"
  And 显示桌面通知 "订单 #order-abc-123 已成交"
```

**场景 4.4: 筛选订单**
```
Given 我在订单历史页面
When 我选择筛选条件
  - 状态: "已成交"
  - 交易对: "BTC/USDT"
  - 时间范围: "最近7天"
  And 我点击"应用筛选"按钮
Then 系统只显示符合条件的订单
  And 显示订单数量 "共 5 笔订单"
```

#### 技术实现
- 后端: REST API + TypeORM 查询 + 分页
- 前端: TanStack Query + Ant Design Table + WebSocket 监听
- 数据库: PostgreSQL orders 表 (带索引优化)

---

### Story 5: 风险控制监控

**作为** 一个已登录的交易者
**我想要** 了解我的账户风控状态
**以便** 避免触发风控规则导致交易被拒绝

#### 验收标准

**场景 5.1: 查看风控面板**
```
Given 我已登录系统
When 我进入主看板页面
Then 我能看到风控状态卡片
  And 显示今日交易次数 "23/100"
  And 显示进度条 23%，状态为正常 (绿色)
  And 显示账户余额 "9,327.66 USDT" 状态为健康 (绿色标签)
  And 没有熔断提示
```

**场景 5.2: 接近风控限制提示**
```
Given 我今天已经提交了 85 笔订单
When 我查看风控面板
Then 进度条显示 85%，状态为警告 (橙色)
  And 显示提示文字 "今日交易次数较多，请注意控制频率"
```

**场景 5.3: 市场熔断通知**
```
Given 我在交易页面
When BTC/USDT 价格在 1 分钟内波动超过 5%
  And 系统触发熔断机制
Then 系统通过 WebSocket 推送熔断通知
  And 风控面板显示警告
    """
    BTC/USDT 暂停交易 (剩余 4分58秒)
    原因: 价格波动超过 5%
    """
  And 交易面板的"提交订单"按钮变为禁用状态
  And 显示提示 "该交易对暂停交易，请稍后再试"
```

**场景 5.4: 熔断解除**
```
Given BTC/USDT 处于熔断状态
When 5 分钟后熔断时间到期
Then 系统自动解除熔断
  And 通过 WebSocket 推送解除通知
  And 风控面板移除熔断警告
  And 交易面板恢复正常
  And 显示提示 "BTC/USDT 已恢复交易"
```

#### 技术实现
- 后端: Risk Service + @nestjs/schedule + Redis 限流
- 前端: TanStack Query + WebSocket 监听
- 算法: 波动率计算 + 熔断机制
- 定时任务: 每 10 秒检查价格波动

---

### Story 6: 智能订单路由

**作为** 一个已登录的交易者
**我想要** 系统自动为我选择最优交易所
**以便** 以最佳价格执行订单

#### 验收标准

**场景 6.1: 买入订单智能路由**
```
Given 当前三个交易所的卖价为:
    | 交易所  | 卖价 (askPrice) |
    | Binance | 67,234.50       |
    | Bybit   | 67,235.20       |
    | OKX     | 67,233.80       |
When 我提交买入订单 0.01 BTC
Then 系统执行智能路由算法
  And 选择卖价最低的交易所: OKX
  And 显示路由推荐
    """
    智能路由推荐: OKX
    价格: 67,233.80
    比 Binance 便宜: 0.70 USDT
    比 Bybit 便宜: 1.40 USDT
    """
  And 订单路由到 OKX 执行
```

**场景 6.2: 卖出订单智能路由**
```
Given 当前三个交易所的买价为:
    | 交易所  | 买价 (bidPrice) |
    | Binance | 67,232.50       |
    | Bybit   | 67,233.00       |
    | OKX     | 67,231.80       |
When 我提交卖出订单 0.01 BTC
Then 系统执行智能路由算法
  And 选择买价最高的交易所: Bybit
  And 显示路由推荐
    """
    智能路由推荐: Bybit
    价格: 67,233.00
    比 Binance 多赚: 0.50 USDT
    比 OKX 多赚: 1.20 USDT
    """
  And 订单路由到 Bybit 执行
```

**场景 6.3: 价格实时更新影响路由**
```
Given 系统推荐 OKX (67,233.80)
When 在我提交订单前 1 秒
  And Binance 价格更新为 67,232.00 (更低)
  And 前端接收到最新价格
Then 智能路由推荐自动更新为 Binance
  And 显示最新推荐信息
```

#### 技术实现
- 后端: Trading Service selectBestExchange() 算法
- 缓存: Redis 存储最新价格
- 前端: 实时价格订阅 + 动态推荐更新
- 算法: 贪心算法选择最优价格

---

### Story 7: 系统监控 (管理员视角)

**作为** 系统管理员
**我想要** 监控系统运行状态
**以便** 及时发现和解决问题

#### 验收标准

**场景 7.1: 查看 Grafana 面板**
```
Given 我是系统管理员
When 我访问 http://localhost:3001
  And 我登录 Grafana (admin/admin)
Then 我能看到 Fusio 监控面板
  And 显示 API 响应时间 (P95): 120ms
  And 显示 WebSocket 连接数: 15
  And 显示订单成功率 (最近5分钟): 98.5%
  And 显示系统正常运行时间: 99.9%
```

**场景 7.2: 响应时间告警**
```
Given 系统正在运行
When API P95 响应时间超过 500ms
Then Grafana 触发告警
  And 面板显示红色警告状态
  And 发送告警通知 (可配置)
```

**场景 7.3: 订单成功率下降**
```
Given 系统正常运行
When 最近 5 分钟订单成功率低于 90%
Then Grafana 显示异常趋势图
  And 我可以查看失败订单的错误日志
  And 我可以分析失败原因
```

#### 技术实现
- 监控: Prometheus 采集指标
- 可视化: Grafana Dashboard
- 指标类型: Histogram (响应时间)、Gauge (连接数)、Counter (订单数)
- 告警: Grafana Alert Rules

---

## 用户旅程地图

### 新用户首次使用完整流程

```
1. 发现阶段
   用户访问系统 → 查看介绍 → 决定注册

2. 注册阶段
   填写邮箱/密码 → 提交注册 → 注册成功 → 跳转登录

3. 首次登录
   输入凭证 → 登录成功 → 进入主看板

4. 探索功能
   查看实时价格 → 观察价格跳动 → 发现最优价格提示

5. 首次交易
   进入交易页面 → 填写订单信息 → 查看智能路由推荐 → 提交订单

6. 等待执行
   订单状态 PENDING → 收到成交通知 → 状态变为 FILLED

7. 查看历史
   进入订单历史 → 查看成交记录 → 确认订单详情

8. 持续使用
   监控风控状态 → 继续交易 → 形成使用习惯
```

### 日常用户典型操作流程

```
1. 登录系统
   输入凭证 → 进入主看板

2. 快速看价
   扫描价格看板 → 识别套利机会 → 记录价差

3. 批量交易
   提交订单 1 → 等待成交 → 提交订单 2 → 等待成交 → ...

4. 风控监控
   检查今日交易次数 → 检查账户余额 → 调整交易策略

5. 历史分析
   导出订单历史 → 分析交易数据 → 优化策略

6. K 线图分析（新增）
   点击"查看图表" → 三交易所 K 线对比 → 启用价差分析 → 识别套利时机
```

---

## 功能优先级

### P0 - 必须实现 (V0.1 - V0.3)

1. **用户认证** (Story 1)
   - 注册/登录
   - JWT Token 管理
   - 会话持久化

2. **实时价格看板** (Story 2 - 卡片视图)
   - WebSocket 连接
   - 价格实时更新
   - 多交易所聚合
   - 最优价格提示

3. **交易订单** (Story 3)
   - 订单提交
   - 异步执行
   - 状态追踪

4. **订单历史** (Story 4)
   - 列表查询
   - 详情展示
   - 实时更新

### P1 - 重要功能 (V0.4 - V0.5)

5. **智能路由** (Story 6)
   - 最优价格选择
   - 路由推荐展示
   - 成本对比

6. **风险控制** (Story 5)
   - 余额检查
   - 每日限额
   - 熔断机制

### P2 - 增强功能 (V0.6 - V0.7)

7. **系统监控** (Story 7)
   - Prometheus 指标
   - Grafana 面板
   - 告警配置

8. **K 线图对比功能** (Story 2 扩展)
   - 三交易所 K 线并排展示
   - 图表交互和十字线同步
   - 价差分析可视化
   - 多时间范围切换（1h/24h/7d）

### P3 - 未来扩展 (可选)

**基础增强**:
- 订单高级筛选（按状态、时间、交易所）
- 订单数据导出（CSV/Excel）
- K 线技术指标（MA、MACD、RSI）
- 价格预警通知（Telegram/Email）
- 套利策略回测
- 移动端适配
- 多语言支持（中/英）
- 暗黑模式

---

## 未来路线图（真实系统关键功能）

### 1. 订单簿深度展示 (Order Book Depth)

展示买卖盘实时深度数据，包括各价格档位的挂单数量和累计量。通过 WebSocket 订阅交易所订单簿数据，使用增量更新机制保持高性能。可视化买卖盘压力分布，帮助交易者判断市场流动性和支撑/阻力位。

### 2. 滑点计算与预警 (Slippage Analysis)

根据订单簿深度计算大单对市场价格的冲击。当用户输入交易数量时，实时计算预估成交价、滑点百分比和影响的价格档位数。大单交易前提供滑点预警，避免因流动性不足导致不利成交。

### 3. 限价单与高级订单 (Advanced Order Types)

支持限价单（Limit Order）、止损单（Stop Loss）、跟踪止损等多种订单类型。限价单挂单后由后台服务监控价格变化，触发条件时自动执行。提供 GTC、IOC、FOK 等多种有效期选项，满足不同交易策略需求。

### 4. 资金流水与多币种管理 (Fund Management)

记录每笔交易的资金变动明细，包括充值、提现、交易、手续费等。支持多币种余额管理（USDT、BTC、ETH），实现可用余额和冻结余额分离。提供资金流水导出功能，方便对账和财务分析。

### 5. 高频数据聚合 (High-Frequency Data Processing)

实现 Tick 级别的高频数据缓冲和批量处理机制，每 100ms 聚合一次数据。计算 VWAP（成交量加权平均价）、实时成交流等专业指标。优化 WebSocket 消息处理性能，支持每秒数千条数据流的实时聚合。

### 6. 数据库事务与幂等性 (Transaction & Idempotency)

使用悲观锁确保订单执行时的数据一致性，避免并发冲突。实现幂等性机制，通过 idempotency-key 防止重复提交订单。所有资金操作使用数据库事务，确保余额扣除、订单创建、流水记录的原子性。

### 7. 并发控制与分布式锁 (Concurrency Control)

实现多层级限流：API 级别（全局）、用户级别（每分钟/每秒）。使用 Redis 分布式锁防止用户并发操作导致的数据不一致。滑动窗口限流算法，精确控制请求频率，避免系统过载。

### 8. 结构化日志与审计追踪 (Structured Logging & Audit)

采用 JSON 格式的结构化日志，包含请求 ID、用户 ID、操作类型等关键字段。建立审计日志表，记录所有敏感操作（登录、下单、撤单）的完整信息。支持按用户、时间、操作类型快速查询，满足监管和安全审计需求。

### 9. 交易对动态配置 (Trading Pair Configuration)

通过数据库配置交易对的最小/最大数量、价格精度、数量精度等参数。支持交易对的启用/停用状态管理，灵活应对市场变化。配置交易所优先级和手续费率，优化智能路由算法。

### 10. 市场流动性指标 (Liquidity Metrics)

计算买卖价差（Bid-Ask Spread）作为流动性指标。统计订单簿深度总量，评估市场容纳大单的能力。实时监控成交量变化，识别流动性枯竭风险并触发预警。

---

## 验收测试检查清单

### 功能测试

**基础功能**:
- [ ] 用户可以成功注册新账户
- [ ] 用户可以使用正确凭证登录
- [ ] 用户可以看到实时价格更新

**交易功能**:
- [ ] 用户可以提交买入订单
- [ ] 用户可以提交卖出订单
- [ ] 订单可以异步执行并更新状态
- [ ] 用户可以查看订单历史

**风控功能**:
- [ ] 余额不足时订单被拒绝
- [ ] 超过每日限额时订单被拒绝
- [ ] 市场熔断时交易被暂停

**智能路由**:
- [ ] 智能路由选择最优价格
- [ ] 显示路由推荐和成本对比

**图表功能** (V0.7):
- [ ] 用户可以切换到 K 线图视图
- [ ] 三个交易所的 K 线图并排显示
- [ ] 鼠标悬停显示 K 线详情
- [ ] 十字线在三个图表间同步
- [ ] 可以切换时间范围（1h/24h/7d）
- [ ] 价差分析模式正常工作
- [ ] 套利机会高亮显示
- [ ] 可以返回卡片视图

**监控功能**:
- [ ] 风控面板显示正确状态
- [ ] Grafana 面板可访问

### 性能测试

- [ ] API 响应时间 < 200ms (P95)
- [ ] WebSocket 消息延迟 < 100ms
- [ ] 订单处理时间 < 3s
- [ ] 系统支持 50+ 并发用户
- [ ] 价格更新频率 1 次/秒
- [ ] K 线图加载时间 < 2s
- [ ] 图表缩放和平移流畅（60 FPS）

### 安全测试

- [ ] 密码使用 bcrypt 加密存储
- [ ] JWT Token 有过期时间
- [ ] API 端点有认证保护
- [ ] SQL 注入防护
- [ ] XSS 攻击防护
- [ ] CORS 正确配置

### 用户体验测试

- [ ] 登录后自动跳转
- [ ] 表单验证提示友好
- [ ] 错误信息清晰易懂
- [ ] 加载状态有视觉反馈
- [ ] 订单状态实时更新
- [ ] WebSocket 断线自动重连
- [ ] K 线图响应式布局适配
- [ ] 图表交互自然流畅

---

## 附录: 术语表

| 术语 | 说明 |
|-----|------|
| 交易对 | 加密货币交易的货币对，如 BTC/USDT |
| 买入 (BUY) | 用 USDT 购买 BTC |
| 卖出 (SELL) | 卖出 BTC 换取 USDT |
| 市价单 | 以当前市场价格立即执行的订单 |
| askPrice | 卖价，卖方愿意卖出的最低价格 |
| bidPrice | 买价，买方愿意买入的最高价格 |
| 智能路由 (SOR) | Smart Order Routing，自动选择最优交易所 |
| 熔断机制 | 价格异常波动时暂停交易的保护措施 |
| WebSocket | 双向通信协议，用于实时数据推送 |
| JWT | JSON Web Token，用于用户认证的令牌 |
| K 线（蜡烛图）| Candlestick Chart，显示开盘、收盘、最高、最低价格 |
| 十字线 | Crosshair，图表上的交叉线，用于精确查看数据点 |
| 价差 | Spread，不同交易所之间的价格差异 |
| 套利 | Arbitrage，利用价格差异获利的交易策略 |
